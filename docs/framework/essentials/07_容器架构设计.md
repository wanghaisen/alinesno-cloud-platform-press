# 容器云架构设计

## 概要

此文档用于容器架构的规划和架构，其中包括容器在平台中的使用场景。
设计愿景是基于项目的团队管理经验和设计，此及涉及的容器指 docker/k8s/mesos 等主流容器技术

## 架构设计

通过可视化 Kubernetes 对象模板编辑的方式，降低业务接入成本， 拥有完整的权限管理系统，适应多租户场景，
是一款适合企业集群使用的发布平台，解决开发、测试、运行环境统一、服务快速部署、运行期服务管理等调度问题，
提供物理机、虚拟机、私有云、公有云统一接入的能力，屏蔽应用对基础设施层的依赖。

<img :src="$withBase('/framework/container_2.png')">

## 企业上云

#### 混合云及多数据中心

专有云架构面对不同的基础设施可实现对公有云、私有云、自有 IDC 等资源的整合。通过公有云＋私有部署＋专线网络为用户提供行业解决方案，
重点解决存量 IT 资源合理利用；企业上云保持业务稳定，架构平滑过渡；多数据中心容灾等场景和需求。

#### 传统架构向互联网架构转型

专有云针对传统企业，应用迭代缓慢，业务交付经常被推迟；传统的单体架构应用难以维护和扩展；应用的运维管理比较复杂等技术难题，
通过容器技术将传统应用容器化，或拆成微服务模式，让业务应用以整个容器为单元去运行，企业可选择最合适的技术去开发业务； 提高资源的利
用率，以及支持自动的弹性伸缩扩展，比如说快速容灾容错等等。

#### 企业数字化转型的基础设施

数字化转型所需的核心能力“统一的数据及流程”，需要一种创新的架构设计方法，专有云以容器技术助力企业实现数字化转型，
自动化运维，轻量级微服务架构能支持上亿级企业大数据分析和处理需求。

#### 多环境、多资源池 DevOps 流水线

专有云交付中心，持续集成涵盖编码、构建、测试、发布等多个环节功能。包括：自动化持续集成、自动化部署等，可实时监控应用，
追踪应用的关键指标；实现回滚，可提取不同环境的配置，以构建自动化持续交付流水线，达到快速交付和安全可控的目的。

#### 基础设施资产集中化管理

企业信息化过程中面临遗留系统太多；信息爆炸，数据异构，难以整合；企业需要电子商务支持，但技术异构，难以协同；业务变化快，
僵化的 IT 基础设施难以迅速响应，这一切都迫切需要一个整合 IT 架构，专有云能无缝的对接各类基础设施实现基础资源信息的互联互通。

## 平台能力

#### 管理界面

实现资源的统一管理，高效共享，按需分配，对集群的资源使用情况
进行实时监控，实现资源的灵活调度和环境隔离。

<img :src="$withBase('/framework/container_manager.png')">

#### 租户界面

多租户机制提供了可隔离的容器云网络环境，平台的基础资源可在租户间实现共享或隔离，平台租户间的数据与应用是完全隔离的。
支持不同的组织架构形式，组织架构可以是一个团队、一个部门、一个团队、一个项目组或者简单一个人等。

<img :src="$withBase('/framework/container_tenant.png')">

#### 资源池化

实现资源的统一管理，高效共享，按需分配，对集群的资源使用情况进行实时监控，实现资源的灵活调度和环境隔离。

<img :src="$withBase('/framework/container_deployment.png')">

## 主要功能

- 基于 RBAC 权限管理：用户通过角色与部门和项目关联，拥有部门角色允许操作部门资源，拥有项目角色允许操作项目资源，更加适合多租户场景。
- 简化 Kubernetes 对象创建：提供基础 Kubernetes 对象配置文件添加方式，同时支持高级模式直接编辑 Json/Yaml 文件创建 Kubernetes 对象。
- 支持多集群、多租户：可以同时管理多个 Kubernetes 集群，并针对性添加特定配置，更方便的多集群、多租户管理。
- 提供完整审计模块：每次操作都会有完整的审计功能，追踪用于操作历史，同时支持用户自定义 webhook。
- 提供基于 APIKey 的开放接口调用：用户可自主申请相关 APIKey 并管理自己的部门和项目，运维人员也可以申请全局 APIKey 进行特定资源的全局管理。
- 保留完整的发布历史：用户可以便捷的找到任何一次历史发布，并可轻松进行回滚，以及基于特定历史版本更新 Kubernetes 资源。
- 具备完善的资源报表：用户可以轻松获取各项目的资源使用占比和历史上线频次（天级）以及其他基础数据的报表和图表。
- 提供基于严密权限校验的 Web shell：用户可以通过 Web shell 的形式进入发布的 Pod 进行操作，自带完整的权限校验。
- 提供站内通知系统：方便管理员推送集群、业务通知和故障处理报告等。

## 其它

- 略
